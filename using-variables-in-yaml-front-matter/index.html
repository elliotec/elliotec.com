<!doctype html> <html lang=en> <head> <meta charset=utf-8 /> <meta http-equiv=X-UA-Compatible content='IE=edge;chrome=1'/> <meta name=author content="Michael Elliott"/> <meta name=description content="Michael Elliott, software developer."/> <meta name=viewport content="width=device-width, initial-scale=1"/> <title>elliotec | Mike Elliott - Using Variables in YAML Front Matter</title> <link rel=alternate type="application/atom+xml" title=elliotec href="/feed.xml"/> <link href="/stylesheets/all.css" rel=stylesheet /> </head> <body> <header class=navigation> <a href="/">{ elliotec }</a> </header> <article class=type-system-rounded> <h1>Using Variables in YAML Front Matter</h1> <p>May 30, 2014 <h2>What is Front Matter?</h2> <p>I didn&rsquo;t know this until just now, but <a href="//en.wikipedia.org/wiki/Book_design#Front_matter">the name comes from book design</a>, where the front matter is just all the stuff before the actual body of the book. This includes the table of contents, title pages, copyright info, etc. It&rsquo;s essentially all the metadata of the book.</p> <p>Likewise, the YAML front matter common in static-site generators like Middleman is the metadata of the current page. In my case that usually ends up being post pages where some of the dynamic data is defined:</p> <pre class="highlight yaml"><code><span class="nn">---</span>
<span class="s">layout</span><span class="pi">:</span> <span class="s">post</span>
<span class="s">title</span><span class="pi">:</span> <span class="s">Using Variables in YAML Front Matter</span>
<span class="s">date</span><span class="pi">:</span> <span class="s">2014-05-30 09:08</span>
<span class="s">tags</span><span class="pi">:</span> <span class="s">yaml, middleman</span>
<span class="nn">---</span>
</code></pre> <p>This makes it super easy to have various HTML layouts that you can assign to any page on your site. It also gives us the date and title options which are useful for the index, file structure, and other obvious benefits. </p> <h2>Setting Custom Variables</h2> <p>I have 4 social media icon SVGs on my portfolio/main index page, and I&rsquo;m currently using each of them twice - one for the contact drop-down menu, and another for the contact section at the bottom. </p> <p>As you can imagine, that clunked up the HTML pretty bad and it was immediately a giant pain to try and find or move anything. I wanted to DRY it up, and I knew that I could do that with Middleman. </p> <p>It only took 3 steps.</p> <p>1) The first thing I did was list each of the icons by name in the front matter:</p> <pre class="highlight yaml"><code><span class="nn">---</span>
<span class="s">github</span><span class="pi">:</span> 

<span class="s">linkedin</span><span class="pi">:</span>

<span class="s">twitter</span><span class="pi">:</span>

<span class="s">email</span><span class="pi">:</span>
<span class="nn">---</span>
</code></pre> <p>2) Then I added the cumbersome svg codes to set the variables for each:</p> <pre class="highlight yaml"><code><span class="nn">---</span>
<span class="s">github</span><span class="pi">:</span> <span class="s">&lt;svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"</span>
                <span class="s">width="22" height="20" viewBox="0 0 99.441 99.44" enable-background="new 0 0 99.441 99.44" xml:space="preserve"&gt;&lt;path id="github" fill="#fff" d="M64.507,95.749c-2.439,0.474-3.303-1.026-3.303-2.307c0-1.584,0.053-6.763,0.053-13.197</span>
                <span class="s">c0-4.486-1.535-7.412-3.259-8.905c10.707-1.189,21.958-5.257,21.958-23.727c0-5.25-1.867-9.541-4.949-12.908</span>
                <span class="s">c0.499-1.211,2.145-6.101-0.473-12.726c0,0-4.034-1.292-13.211,4.931c-3.844-1.065-7.96-1.601-12.047-1.619</span>
                <span class="s">c-4.088,0.018-8.201,0.554-12.036,1.619c-9.189-6.222-13.228-4.931-13.228-4.931c-2.611,6.625-0.966,11.515-0.465,12.726</span>
                <span class="s">c-3.079,3.368-4.957,7.658-4.957,12.908c0,18.428,11.228,22.55,21.91,23.767c-1.374,1.199-2.62,3.32-3.054,6.428</span>
                <span class="s">c-2.745,1.23-9.705,3.356-13.993-3.996c0,0-2.543-4.615-7.373-4.956c0,0-4.69-0.061-0.329,2.923c0,0,3.152,1.479,5.339,7.036</span>
                <span class="s">c0,0,2.824,8.585,16.202,5.675c0.02,4.019,0.065,7.808,0.065,8.953c0,1.27-0.881,2.758-3.286,2.312</span>
                <span class="s">C14.968,89.396,1.188,71.37,1.188,50.125c0-26.56,21.533-48.089,48.089-48.089c26.558,0,48.088,21.529,48.088,48.089</span>
              <span class="s">C97.364,71.366,83.604,89.382,64.507,95.749z"/&gt;&lt;/svg&gt;</span>
<span class="s">linkedin</span><span class="pi">:</span> <span class="s">&lt;svg&gt; ...</span>
<span class="nn">---</span>
</code></pre> <p>3) After that it was simply a matter of calling &ldquo;current_page.data&rdquo; and passing the custom variable in its place in Erb:</p> <pre class="highlight erb"><code><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://github.com/elliotec"</span><span class="nt">&gt;</span><span class="cp">&lt;%=</span> <span class="n">current_page</span><span class="p">.</span><span class="nf">data</span><span class="p">.</span><span class="nf">github</span> <span class="cp">%&gt;</span>Github<span class="nt">&lt;/a&gt;</span>
</code></pre> <p>Now the code base is much more DRY and modular, and the generated HTML is producing the expected behavior. </p> <p>You can do this in Jekyll too, but there are a few differences (basically just step 3) so <a href="//jekyllrb.com/docs/frontmatter/">check out their docs if thats what you&rsquo;re into</a>. </p> <p>For more info on the Middleman front matter, <a href="//middlemanapp.com/basics/frontmatter/">see the relavent section in the Middleman docs</a>.</p> <p>&ndash; Mike</p> </article> <a href="https://plus.google.com/+MichaelElliott-elliotec?rel=author"></a> <a href="https://plus.google.com/100799948688623726078?rel=publisher"></a> <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-46276194-3', 'elliotec.com');
      ga('send', 'pageview');
    </script> </body> </html>